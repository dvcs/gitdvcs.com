<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="keywords" content="">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=0">
    <link rel="shortcut icon" type="image/png" href="favicon.ico">
    
    <link rel="stylesheet" type="text/css" href="https://www.gitdvcs.com/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="https://www.gitdvcs.com/style.css">
    
        <link rel="stylesheet" type="text/css" href="https://www.gitdvcs.com/carbonv.css">
    
    <link rel="stylesheet" href="https://www.gitdvcs.com/css/animate.min.css">
    <link rel="stylesheet" href="https://www.gitdvcs.com/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://www.gitdvcs.com/css/ionicons.min.css">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400&subset=latin,latin-ext' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Varela+Round&subset=latin,latin-ext' rel='stylesheet' type='text/css'>
    
    <script src="https://www.gitdvcs.com/js/jquery-2.1.0.min.js"></script>
    <script src="https://www.gitdvcs.com/js/bootstrap.min.js"></script>
    <script src="https://www.gitdvcs.com/js/blocs.min.js"></script>
    <title> git-bisect </title>
</head>
<body>


<div class="page-container">


<div class="bloc sticky-nav bg-what-is-git bgc-white l-bloc" id="navigation-bar">
	<div class="container bloc-sm">
	<a href="https://github.com/dvcs/gitdvcs.com" class="github-corner" aria-label="View source on Github"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#42A5E8; color:#FFFFFF; position: absolute; top: 0; border: 0; left: 0; transform: scale(-1, 1);" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

		<nav class="navbar row">
			<div class="navbar-header">
				<a class="navbar-brand" href="https://www.gitdvcs.com/"><img src="https://www.gitdvcs.com/img/git.svg" alt="logo" /></a>
				<button id="nav-toggle" type="button" class="ui-navbar-toggle navbar-toggle" data-toggle="collapse" data-target=".navbar-1">
					<span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span>
				</button>
			</div>
			<div class="collapse navbar-collapse navbar-1">
					<ul class="site-navigation nav navbar-nav navigation-links">
						<li>
							<a href="https://www.gitdvcs.com/documentation/">Documentation</a>
						</li>
						<li>
							<a href="https://www.gitdvcs.com/how-to/">How To</a>
						</li>
						<li>
							<a href="https://www.gitdvcs.com/downloads/">Downloads</a>
						</li>
						<li>
							<a href="https://www.gitdvcs.com/resources/">Resources</a>
						</li>
					</ul>
			</div>
		</nav>
	</div>
</div>





<div class="bloc l-bloc bgc-white " id="bloc-1">
	<div class="container bloc-lg">
		<div class="row">
			<div class="col-sm-10">
				<h1 id="title">git-bisect</h1>
				<section>
	<div class="bread-container shadow">
		
		
		<ol class="breadcrumb">
			<li><a href="https://www.gitdvcs.com/">home</a></li>
			
			
			
			<li><a href='https://www.gitdvcs.com/documentation'>documentation</a></li>
			
			
			
			
			
			<li><a href='https://www.gitdvcs.com/documentation/2.6.7'>2.6.7</a></li>
			
			
			
			
			
			<li><a href='https://www.gitdvcs.com/documentation/2.6.7/git-bisect'>git-bisect</a></li>
			
			
			
			
			
			
		</ol>
	</div>
</section>

				

<!-- Do not manually edit - This file is generated with bootstrap.sh -->

<h2 id="synopsis">SYNOPSIS</h2>

<pre><code>git bisect &lt;subcommand&gt; &lt;options&gt;
</code></pre>

<h2 id="description">DESCRIPTION</h2>

<p>The command takes various subcommands, and different options depending
on the subcommand:</p>

<pre><code>git bisect start [--no-checkout] [&lt;bad&gt; [&lt;good&gt;...]] [--] [&lt;paths&gt;...]
git bisect bad [&lt;rev&gt;]
git bisect good [&lt;rev&gt;...]
git bisect skip [(&lt;rev&gt;|&lt;range&gt;)...]
git bisect reset [&lt;commit&gt;]
git bisect visualize
git bisect replay &lt;logfile&gt;
git bisect log
git bisect run &lt;cmd&gt;...
git bisect help
</code></pre>

<p>This command uses a binary search algorithm to find which commit in your
project’s history introduced a bug. You use it by first telling it a
&ldquo;bad&rdquo; commit that is known to contain the bug, and a &ldquo;good&rdquo; commit that
is known to be before the bug was introduced. Then <code>git bisect</code> picks a
commit between those two endpoints and asks you whether the selected
commit is &ldquo;good&rdquo; or &ldquo;bad&rdquo;. It continues narrowing down the range until
it finds the exact commit that introduced the change.</p>

<h3 id="basic-bisect-commands-start-bad-good">Basic bisect commands: start, bad, good</h3>

<p>As an example, suppose you are trying to find the commit that broke a
feature that was known to work in version <code>v2.6.13-rc2</code> of your project.
You start a bisect session as follows:</p>

<pre><code>$ git bisect start
$ git bisect bad                 # Current version is bad
$ git bisect good v2.6.13-rc2    # v2.6.13-rc2 is known to be good
</code></pre>

<p>Once you have specified at least one bad and one good commit,
<code>git bisect</code> selects a commit in the middle of that range of history,
checks it out, and outputs something similar to the following:</p>

<pre><code>Bisecting: 675 revisions left to test after this (roughly 10 steps)
</code></pre>

<p>You should now compile the checked-out version and test it. If that
version works correctly, type</p>

<pre><code>$ git bisect good
</code></pre>

<p>If that version is broken, type</p>

<pre><code>$ git bisect bad
</code></pre>

<p>Then <code>git bisect</code> will respond with something like</p>

<pre><code>Bisecting: 337 revisions left to test after this (roughly 9 steps)
</code></pre>

<p>Keep repeating the process: compile the tree, test it, and depending on
whether it is good or bad run <code>git bisect good</code> or
<code>git bisect                 bad</code> to ask for the next commit that needs
testing.</p>

<p>Eventually there will be no more revisions left to inspect, and the
command will print out a description of the first bad commit. The
reference <code>refs/bisect/bad</code> will be left pointing at that commit.</p>

<h3 id="bisect-reset">Bisect reset</h3>

<p>After a bisect session, to clean up the bisection state and return to
the original HEAD, issue the following command:</p>

<pre><code>$ git bisect reset
</code></pre>

<p>By default, this will return your tree to the commit that was checked
out before <code>git bisect                 start</code>. (A new <code>git bisect start</code>
will also do that, as it cleans up the old bisection state.)</p>

<p>With an optional argument, you can return to a different commit instead:</p>

<pre><code>$ git bisect reset &lt;commit&gt;
</code></pre>

<p>For example, <code>git bisect reset bisect/bad</code> will check out the first bad
revision, while <code>git bisect reset HEAD</code> will leave you on the current
bisection commit and avoid switching commits at all.</p>

<h3 id="bisect-visualize">Bisect visualize</h3>

<p>To see the currently remaining suspects in <em>gitk</em>, issue the following
command during the bisection process:</p>

<pre><code>$ git bisect visualize
</code></pre>

<p><code>view</code> may also be used as a synonym for <code>visualize</code>.</p>

<p>If the <em>DISPLAY</em> environment variable is not set, <em>git log</em> is used
instead. You can also give command-line options such as <code>-p</code> and
<code>--stat</code>.</p>

<pre><code>$ git bisect view --stat
</code></pre>

<h3 id="bisect-log-and-bisect-replay">Bisect log and bisect replay</h3>

<p>After having marked revisions as good or bad, issue the following
command to show what has been done so far:</p>

<pre><code>$ git bisect log
</code></pre>

<p>If you discover that you made a mistake in specifying the status of a
revision, you can save the output of this command to a file, edit it to
remove the incorrect entries, and then issue the following commands to
return to a corrected state:</p>

<pre><code>$ git bisect reset
$ git bisect replay that-file
</code></pre>

<h3 id="avoiding-testing-a-commit">Avoiding testing a commit</h3>

<p>If, in the middle of a bisect session, you know that the suggested
revision is not a good one to test (e.g. it fails to build and you know
that the failure does not have anything to do with the bug you are
chasing), you can manually select a nearby commit and test that one
instead.</p>

<p>For example:</p>

<pre><code>$ git bisect good/bad                   # previous round was good or bad.
Bisecting: 337 revisions left to test after this (roughly 9 steps)
$ git bisect visualize                  # oops, that is uninteresting.
$ git reset --hard HEAD~3               # try 3 revisions before what
                                        # was suggested
</code></pre>

<p>Then compile and test the chosen revision, and afterwards mark the
revision as good or bad in the usual manner.</p>

<h3 id="bisect-skip">Bisect skip</h3>

<p>Instead of choosing a nearby commit by yourself, you can ask Git to do
it for you by issuing the command:</p>

<pre><code>$ git bisect skip                 # Current version cannot be tested
</code></pre>

<p>However, if you skip a commit adjacent to the one you are looking for,
Git will be unable to tell exactly which of those commits was the first
bad one.</p>

<p>You can also skip a range of commits, instead of just one commit, using
range notation. For example:</p>

<pre><code>$ git bisect skip v2.5..v2.6
</code></pre>

<p>This tells the bisect process that no commit after <code>v2.5</code>, up to and
including <code>v2.6</code>, should be tested.</p>

<p>Note that if you also want to skip the first commit of the range you
would issue the command:</p>

<pre><code>$ git bisect skip v2.5 v2.5..v2.6
</code></pre>

<p>This tells the bisect process that the commits between <code>v2.5</code> and <code>v2.6</code>
(inclusive) should be skipped.</p>

<h3 id="cutting-down-bisection-by-giving-more-parameters-to-bisect-start">Cutting down bisection by giving more parameters to bisect start</h3>

<p>You can further cut down the number of trials, if you know what part of
the tree is involved in the problem you are tracking down, by specifying
path parameters when issuing the <code>bisect start</code> command:</p>

<pre><code>$ git bisect start -- arch/i386 include/asm-i386
</code></pre>

<p>If you know beforehand more than one good commit, you can narrow the
bisect space down by specifying all of the good commits immediately
after the bad commit when issuing the <code>bisect start</code> command:</p>

<pre><code>$ git bisect start v2.6.20-rc6 v2.6.20-rc4 v2.6.20-rc1 --
                   # v2.6.20-rc6 is bad
                   # v2.6.20-rc4 and v2.6.20-rc1 are good
</code></pre>

<h3 id="bisect-run">Bisect run</h3>

<p>If you have a script that can tell if the current source code is good or
bad, you can bisect by issuing the command:</p>

<pre><code>$ git bisect run my_script arguments
</code></pre>

<p>Note that the script (<code>my_script</code> in the above example) should exit with
code 0 if the current source code is good/old, and exit with a code
between 1 and 127 (inclusive), except 125, if the current source code is
bad/new.</p>

<p>Any other exit code will abort the bisect process. It should be noted
that a program that terminates via <code>exit(-1)</code> leaves $? = 255, (see the
exit(3) manual page), as the value is chopped with <code>&amp; 0377</code>.</p>

<p>The special exit code 125 should be used when the current source code
cannot be tested. If the script exits with this code, the current
revision will be skipped (see <code>git bisect skip</code> above). 125 was chosen
as the highest sensible value to use for this purpose, because 126 and
127 are used by POSIX shells to signal specific error status (127 is for
command not found, 126 is for command found but not executable—these
details do not matter, as they are normal errors in the script, as far
as <code>bisect run</code> is concerned).</p>

<p>You may often find that during a bisect session you want to have
temporary modifications (e.g. s/#define DEBUG 0/#define DEBUG 1/ in a
header file, or &ldquo;revision that does not have this commit needs this
patch applied to work around another problem this bisection is not
interested in&rdquo;) applied to the revision being tested.</p>

<p>To cope with such a situation, after the inner <em>git bisect</em> finds the
next revision to test, the script can apply the patch before compiling,
run the real test, and afterwards decide if the revision (possibly with
the needed patch) passed the test and then rewind the tree to the
pristine state. Finally the script should exit with the status of the
real test to let the <code>git bisect run</code> command loop determine the
eventual outcome of the bisect session.</p>

<h2 id="options">OPTIONS</h2>

<p>&ndash;no-checkout<br />
Do not checkout the new working tree at each iteration of the bisection
process. Instead just update a special reference named <em>BISECT_HEAD</em> to
make it point to the commit that should be tested.</p>

<p>This option may be useful when the test you would perform in each step
does not require a checked out tree.</p>

<p>If the repository is bare, <code>--no-checkout</code> is assumed.</p>

<h2 id="examples">EXAMPLES</h2>

<ul>
<li><p>Automatically bisect a broken build between v1.2 and HEAD:</p>

<pre><code>$ git bisect start HEAD v1.2 --      # HEAD is bad, v1.2 is good
$ git bisect run make                # &quot;make&quot; builds the app
$ git bisect reset                   # quit the bisect session
</code></pre></li>

<li><p>Automatically bisect a test failure between origin and HEAD:</p>

<pre><code>$ git bisect start HEAD origin --    # HEAD is bad, origin is good
$ git bisect run make test           # &quot;make test&quot; builds and tests
$ git bisect reset                   # quit the bisect session
</code></pre></li>

<li><p>Automatically bisect a broken test case:</p>

<pre><code>$ cat ~/test.sh
#!/bin/sh
make || exit 125                     # this skips broken builds
~/check_test_case.sh                 # does the test case pass?
$ git bisect start HEAD HEAD~10 --   # culprit is among the last 10
$ git bisect run ~/test.sh
$ git bisect reset                   # quit the bisect session
</code></pre>

<p>Here we use a <code>test.sh</code> custom script. In this script, if <code>make</code>
fails, we skip the current commit. <code>check_test_case.sh</code> should
<code>exit                     0</code> if the test case passes, and
<code>exit                     1</code> otherwise.</p>

<p>It is safer if both <code>test.sh</code> and <code>check_test_case.sh</code> are outside
the repository to prevent interactions between the bisect, make and
test processes and the scripts.</p></li>

<li><p>Automatically bisect with temporary modifications (hot-fix):</p>

<pre><code>$ cat ~/test.sh
#!/bin/sh

# tweak the working tree by merging the hot-fix branch
# and then attempt a build
if      git merge --no-commit hot-fix &amp;&amp;
        make
then
        # run project specific test and report its status
        ~/check_test_case.sh
        status=$?
else
        # tell the caller this is untestable
        status=125
fi

# undo the tweak to allow clean flipping to the next commit
git reset --hard

# return control
exit $status
</code></pre>

<p>This applies modifications from a hot-fix branch before each test
run, e.g. in case your build or test environment changed so that
older revisions may need a fix which newer ones have already. (Make
sure the hot-fix branch is based off a commit which is contained in
all revisions which you are bisecting, so that the merge does not
pull in too much, or use <code>git cherry-pick</code> instead of <code>git merge</code>.)</p></li>

<li><p>Automatically bisect a broken test case:</p>

<pre><code>$ git bisect start HEAD HEAD~10 --   # culprit is among the last 10
$ git bisect run sh -c &quot;make || exit 125; ~/check_test_case.sh&quot;
$ git bisect reset                   # quit the bisect session
</code></pre>

<p>This shows that you can do without a run script if you write the
test on a single line.</p></li>

<li><p>Locate a good region of the object graph in a damaged repository</p>

<pre><code>$ git bisect start HEAD &lt;known-good-commit&gt; [ &lt;boundary-commit&gt; ... ] --no-checkout
$ git bisect run sh -c '
        GOOD=$(git for-each-ref &quot;--format=%(objectname)&quot; refs/bisect/good-*) &amp;&amp;
        git rev-list --objects BISECT_HEAD --not $GOOD &gt;tmp.$$ &amp;&amp;
        git pack-objects --stdout &gt;/dev/null &lt;tmp.$$
        rc=$?
        rm -f tmp.$$
        test $rc = 0'

$ git bisect reset                   # quit the bisect session
</code></pre>

<p>In this case, when <em>git bisect run</em> finishes, bisect/bad will refer
to a commit that has at least one parent whose reachable graph is
fully traversable in the sense required by <em>git pack objects</em>.</p></li>
</ul>

<h3 id="getting-help">Getting help</h3>

<p>Use <code>git bisect</code> to get a short usage description, and <code>git bisect help</code>
or <code>git bisect -h</code> to get a long usage description.</p>

<h2 id="see-also">SEE ALSO</h2>

<p><a href="git-bisect-lk2009">Fighting regressions with git bisect</a>,
<a href="../git-blame">git-blame(1)</a>.</p>

<h2 id="git">GIT</h2>

<p>Part of the <a href="../git">git(1)</a> suite</p>

			</div>
			<div class="col-sm-2">
				
<center>
<script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?zoneid=1673&serve=C6AILKT&placement=gitdvcscom" id="_carbonads_js"></script>
</center>


			</div>
		</div>
	</div>
</div>



<a class="bloc-button btn btn-d scrollToTop" onclick="scrollToTarget('1')"><span class="fa fa-chevron-up"></span></a>




<div class="bloc navigation-linksnavigation-links git-background-night bgc-medium-jungle-green d-bloc" id="footer">
	<div class="container bloc-md">
		<div class="row">
			<div class="col-sm-3">
				<h4 class="mg-md">
					Git
				</h4><a href="https://www.gitdvcs.com/documentation/" class="a-btn a-block bloc-mob-center-text">Documentation</a><a href="https://www.gitdvcs.com/how-to/" class="a-btn a-block bloc-mob-center-text">How To</a><a href="https://www.gitdvcs.com/downloads/" class="a-btn a-block bloc-mob-center-text">Downloads</a><a href="https://www.gitdvcs.com/resources/" class="a-btn a-block bloc-mob-center-text">Resources</a>
			</div>
			<div class="col-sm-3">
				<h4 class="mg-md">
					Resources <br>
				</h4><a href="https://www.gitdvcs.com/resources/links/" class="a-btn a-block bloc-mob-center-text">Links</a><a href="https://www.gitdvcs.com/resources/logo/" class="a-btn a-block bloc-mob-center-text">Logo</a><a href="https://www.gitdvcs.com/resources/videos/" class="a-btn a-block bloc-mob-center-text">Videos</a>
			</div>
			<div class="col-sm-3">
				<h4 class="mg-md">
					DVCS<br>
				</h4><a href="https://github.com/dvcs" class="a-btn a-block bloc-mob-center-text">GitHub</a>
			</div>
			<div class="col-sm-3">
				<h4 class="mg-md">
					About<br>
				</h4><a href="https://www.gitdvcs.com/about/" class="a-btn a-block bloc-mob-center-text">About</a>
			</div>
		</div>
	</div>
</div>



<div class="bloc git-background-night bgc-medium-jungle-green" id="copyright">
	<div class="container bloc-sm">
		<div class="row">
			<div class="col-sm-12 text-center">
				<a href="https://www.gitdvcs.com"><img src="https://www.gitdvcs.com/img/git-logo-white.svg" class="img-responsive center-block mg-md" height="38" width="38" /></a>
				<p class="text-center mg-lg">
					<a href="https://github.com/dvcs">2017 — 2018 DVCS</a><br>
				</p>
			</div>
		</div>
	</div>
</div>


</div>



</body>
</html>
