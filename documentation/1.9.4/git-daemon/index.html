<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="keywords" content="[]">
    <meta name="description" content="A really simple server for Git repositories">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=0">
    <link rel="shortcut icon" type="image/png" href="../../../favicon.png">

    <link rel="stylesheet" type="text/css" href="../../../css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="../../../style.css">
    <link rel="stylesheet" href="../../../css/animate.min.css">
    <link rel="stylesheet" href="../../../css/font-awesome.min.css">

    <script src="../../../js/jquery-2.1.0.min.js"></script>
    <script src="../../../js/bootstrap.min.js"></script>
    <script src="../../../js/blocs.min.js"></script>
    <title> git-daemon </title>
</head>
<body>


<div class="page-container">

	
<div class="bloc sticky-nav bg-what-is-git bgc-white l-bloc" id="bloc-0">
	<div class="container bloc-sm">
		<nav class="navbar row">
			<div class="navbar-header">
				<a class="navbar-brand" href="../../../"><img src="../../../img/git.svg" alt="logo" /></a>
				<button id="nav-toggle" type="button" class="ui-navbar-toggle navbar-toggle" data-toggle="collapse" data-target=".navbar-1">
					<span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span>
				</button>
			</div>
			<div class="collapse navbar-collapse navbar-1">
					<ul class="site-navigation nav navbar-nav navigation-links">
						<li>
							<a href="../../../documentation/" class="ltc-celestial-blue">Documentation</a>
						</li>
						<li>
							<a href="../../../how-to/" class="ltc-celestial-blue">How To</a>
						</li>
						<li>
							<a href="../../../downloads/" class="ltc-celestial-blue">Downloads</a>
						</li>
						<li>
							<a href="../../../resources/" class="ltc-celestial-blue">Resources</a>
						</li>
					</ul>
			</div>
		</nav>
	</div>
</div>
	




<div class="bloc l-bloc bgc-white " id="bloc-1">
	<div class="container bloc-lg">
		<div class="row">
			<div class="col-sm-10">
				<h1 id="title">git-daemon</h1>
				<section>
	<div class="bread-container shadow">
		
		
		<ol class="breadcrumb">
			<li><a href="../../../">üè†</a></li>
			
			
			
			<li><a href='../../../https://www.gitdvcs.com/documentation'>documentation</a></li>
			
			
			
			
			
			<li><a href='../../../https://www.gitdvcs.com/documentation/1.9.4'>1.9.4</a></li>
			
			
			
			
			
			<li><a href='../../../https://www.gitdvcs.com/documentation/1.9.4/git-daemon'>git-daemon</a></li>
			
			
			
			
			
			
		</ol>
	</div>
</section>

				

<!-- Do not manually edit - This file is generated with bootstrap.sh -->

<h2 id="synopsis">SYNOPSIS</h2>

<pre><code class="language-content">git daemon [--verbose] [--syslog] [--export-all]
             [--timeout=&lt;n&gt;] [--init-timeout=&lt;n&gt;] [--max-connections=&lt;n&gt;]
             [--strict-paths] [--base-path=&lt;path&gt;] [--base-path-relaxed]
             [--user-path | --user-path=&lt;path&gt;]
             [--interpolated-path=&lt;pathtemplate&gt;]
             [--reuseaddr] [--detach] [--pid-file=&lt;file&gt;]
             [--enable=&lt;service&gt;] [--disable=&lt;service&gt;]
             [--allow-override=&lt;service&gt;] [--forbid-override=&lt;service&gt;]
             [--access-hook=&lt;path&gt;] [--[no-]informative-errors]
             [--inetd |
              [--listen=&lt;host_or_ipaddr&gt;] [--port=&lt;n&gt;]
              [--user=&lt;user&gt; [--group=&lt;group&gt;]]]
             [&lt;directory&gt;‚Ä¶]
</code></pre>

<h2 id="description">DESCRIPTION</h2>

<p>A really simple TCP Git daemon that normally listens on port &ldquo;DEFAULT_GIT_PORT&rdquo; aka 9418. It waits for a connection asking for a service, and will serve that service if it is enabled.</p>

<p>It verifies that the directory has the magic file &ldquo;git-daemon-export-ok&rdquo;, and it will refuse to export any Git directory that hasn‚Äôt explicitly been marked for export this way (unless the <em>&ndash;export-all</em> parameter is specified). If you pass some directory paths as <em>git daemon</em> arguments, you can further restrict the offers to a whitelist comprising of those.</p>

<p>By default, only <code>upload-pack</code> service is enabled, which serves <em>git fetch-pack</em> and <em>git ls-remote</em> clients, which are invoked from <em>git fetch</em>, <em>git pull</em>, and <em>git clone</em>.</p>

<p>This is ideally suited for read-only updates, i.e., pulling from Git repositories.</p>

<p>An <code>upload-archive</code> also exists to serve <em>git archive</em>.</p>

<h2 id="options">OPTIONS</h2>

<p>&ndash;strict-paths<br />
Match paths exactly (i.e. don‚Äôt allow &ldquo;/foo/repo&rdquo; when the real path is &ldquo;/foo/repo.git&rdquo; or &ldquo;/foo/repo/.git&rdquo;) and don‚Äôt do user-relative paths. <em>git daemon</em> will refuse to start when this option is enabled and no whitelist is specified.</p>

<p>&ndash;base-path=&lt;path&gt;<br />
Remap all the path requests as relative to the given path. This is sort of &ldquo;Git root&rdquo; - if you run <em>git daemon</em> with <em>&ndash;base-path=/srv/git</em> on example.com, then if you later try to pull <em>git://example.com/hello.git</em>, <em>git daemon</em> will interpret the path as <em>/srv/git/hello.git</em>.</p>

<p>&ndash;base-path-relaxed<br />
If &ndash;base-path is enabled and repo lookup fails, with this option <em>git daemon</em> will attempt to lookup without prefixing the base path. This is useful for switching to &ndash;base-path usage, while still allowing the old paths.</p>

<p>&ndash;interpolated-path=&lt;pathtemplate&gt;<br />
To support virtual hosting, an interpolated path template can be used to dynamically construct alternate paths. The template supports %H for the target hostname as supplied by the client but converted to all lowercase, %CH for the canonical hostname, %IP for the server‚Äôs IP address, %P for the port number, and %D for the absolute path of the named repository. After interpolation, the path is validated against the directory whitelist.</p>

<p>&ndash;export-all<br />
Allow pulling from all directories that look like Git repositories (have the <em>objects</em> and <em>refs</em> subdirectories), even if they do not have the <em>git-daemon-export-ok</em> file.</p>

<p>&ndash;inetd<br />
Have the server run as an inetd service. Implies &ndash;syslog. Incompatible with &ndash;detach, &ndash;port, &ndash;listen, &ndash;user and &ndash;group options.</p>

<p>&ndash;listen=&lt;host_or_ipaddr&gt;<br />
Listen on a specific IP address or hostname. IP addresses can be either an IPv4 address or an IPv6 address if supported. If IPv6 is not supported, then &ndash;listen=hostname is also not supported and &ndash;listen must be given an IPv4 address. Can be given more than once. Incompatible with <em>&ndash;inetd</em> option.</p>

<p>&ndash;port=&lt;n&gt;<br />
Listen on an alternative port. Incompatible with <em>&ndash;inetd</em> option.</p>

<p>&ndash;init-timeout=&lt;n&gt;<br />
Timeout (in seconds) between the moment the connection is established and the client request is received (typically a rather low value, since that should be basically immediate).</p>

<p>&ndash;timeout=&lt;n&gt;<br />
Timeout (in seconds) for specific client sub-requests. This includes the time it takes for the server to process the sub-request and the time spent waiting for the next client‚Äôs request.</p>

<p>&ndash;max-connections=&lt;n&gt;<br />
Maximum number of concurrent clients, defaults to 32. Set it to zero for no limit.</p>

<p>&ndash;syslog<br />
Log to syslog instead of stderr. Note that this option does not imply &ndash;verbose, thus by default only error conditions will be logged.</p>

<p>&ndash;user-path
&ndash;user-path=&lt;path&gt;<br />
Allow ~user notation to be used in requests. When specified with no parameter, requests to git://host/~alice/foo is taken as a request to access <em>foo</em> repository in the home directory of user <code>alice</code>. If <code>--user-path=path</code> is specified, the same request is taken as a request to access <code>path/foo</code> repository in the home directory of user <code>alice</code>.</p>

<p>&ndash;verbose<br />
Log details about the incoming connections and requested files.</p>

<p>&ndash;reuseaddr<br />
Use SO_REUSEADDR when binding the listening socket. This allows the server to restart without waiting for old connections to time out.</p>

<p>&ndash;detach<br />
Detach from the shell. Implies &ndash;syslog.</p>

<p>&ndash;pid-file=&lt;file&gt;<br />
Save the process id in <em>file</em>. Ignored when the daemon is run under <code>--inetd</code>.</p>

<p>&ndash;user=&lt;user&gt;
&ndash;group=&lt;group&gt;<br />
Change daemon‚Äôs uid and gid before entering the service loop. When only <code>--user</code> is given without <code>--group</code>, the primary group ID for the user is used. The values of the option are given to <code>getpwnam(3)</code> and <code>getgrnam(3)</code> and numeric IDs are not supported.</p>

<p>Giving these options is an error when used with <code>--inetd</code>; use the facility of inet daemon to achieve the same before spawning <em>git daemon</em> if needed.</p>

<p>Like many programs that switch user id, the daemon does not reset environment variables such as <code>$HOME</code> when it runs git programs, e.g. <code>upload-pack</code> and <code>receive-pack</code>. When using this option, you may also want to set and export <code>HOME</code> to point at the home directory of <code>&lt;user&gt;</code> before starting the daemon, and make sure any Git configuration files in that directory are readable by <code>&lt;user&gt;</code>.</p>

<p>&ndash;enable=&lt;service&gt;
&ndash;disable=&lt;service&gt;<br />
Enable/disable the service site-wide per default. Note that a service disabled site-wide can still be enabled per repository if it is marked overridable and the repository enables the service with a configuration item.</p>

<p>&ndash;allow-override=&lt;service&gt;
&ndash;forbid-override=&lt;service&gt;<br />
Allow/forbid overriding the site-wide default with per repository configuration. By default, all the services are overridable.</p>

<p>&ndash;[no-]informative-errors<br />
When informative errors are turned on, git-daemon will report more verbose errors to the client, differentiating conditions like &ldquo;no such repository&rdquo; from &ldquo;repository not exported&rdquo;. This is more convenient for clients, but may leak information about the existence of unexported repositories. When informative errors are not enabled, all errors report &ldquo;access denied&rdquo; to the client. The default is &ndash;no-informative-errors.</p>

<p>&ndash;access-hook=&lt;path&gt;<br />
Every time a client connects, first run an external command specified by the &lt;path&gt; with service name (e.g. &ldquo;upload-pack&rdquo;), path to the repository, hostname (%H), canonical hostname (%CH), ip address (%IP), and tcp port (%P) as its command line arguments. The external command can decide to decline the service by exiting with a non-zero status (or to allow it by exiting with a zero status). It can also look at the $REMOTE_ADDR and $REMOTE_PORT environment variables to learn about the requestor when making this decision.</p>

<p>The external command can optionally write a single line to its standard output to be sent to the requestor as an error message when it declines the service.</p>

<p>&lt;directory&gt;<br />
A directory to add to the whitelist of allowed directories. Unless &ndash;strict-paths is specified this will also include subdirectories of each named directory.</p>

<h2 id="services">SERVICES</h2>

<p>These services can be globally enabled/disabled using the command line options of this command. If a finer-grained control is desired (e.g. to allow <em>git archive</em> to be run against only in a few selected repositories the daemon serves), the per-repository configuration file can be used to enable or disable them.</p>

<p>upload-pack<br />
This serves <em>git fetch-pack</em> and <em>git ls-remote</em> clients. It is enabled by default, but a repository can disable it by setting <code>daemon.uploadpack</code> configuration item to <code>false</code>.</p>

<p>upload-archive<br />
This serves <em>git archive &ndash;remote</em>. It is disabled by default, but a repository can enable it by setting <code>daemon.uploadarch</code> configuration item to <code>true</code>.</p>

<p>receive-pack<br />
This serves <em>git send-pack</em> clients, allowing anonymous push. It is disabled by default, as there is <em>no</em> authentication in the protocol (in other words, anybody can push anything into the repository, including removal of refs). This is solely meant for a closed LAN setting where everybody is friendly. This service can be enabled by setting <code>daemon.receivepack</code> configuration item to <code>true</code>.</p>

<h2 id="examples">EXAMPLES</h2>

<p>We assume the following in /etc/services<br />
    $ grep 9418 /etc/services
    git             9418/tcp                # Git Version Control System</p>

<p><em>git daemon</em> as inetd server<br />
To set up <em>git daemon</em> as an inetd service that handles any repository under the whitelisted set of directories, /pub/foo and /pub/bar, place an entry like the following into /etc/inetd all on one line:</p>

<pre><code>        git stream tcp nowait nobody  /usr/bin/git
                git daemon --inetd --verbose --export-all
                /pub/foo /pub/bar
</code></pre>

<p><em>git daemon</em> as inetd server for virtual hosts<br />
To set up <em>git daemon</em> as an inetd service that handles repositories for different virtual hosts, <code>www.example.com</code> and <code>www.example.org</code>, place an entry like the following into <code>/etc/inetd</code> all on one line:</p>

<pre><code>        git stream tcp nowait nobody /usr/bin/git
                git daemon --inetd --verbose --export-all
                --interpolated-path=/pub/%H%D
                /pub/www.example.org/software
                /pub/www.example.com/software
                /software
</code></pre>

<p>In this example, the root-level directory <code>/pub</code> will contain a subdirectory for each virtual host name supported. Further, both hosts advertise repositories simply as <code>git://www.example.com/software/repo.git</code>. For pre-1.4.0 clients, a symlink from <code>/software</code> into the appropriate default repository could be made as well.</p>

<p><em>git daemon</em> as regular daemon for virtual hosts<br />
To set up <em>git daemon</em> as a regular, non-inetd service that handles repositories for multiple virtual hosts based on their IP addresses, start the daemon like this:</p>

<pre><code>        git daemon --verbose --export-all
                --interpolated-path=/pub/%IP/%D
                /pub/192.168.1.200/software
                /pub/10.10.220.23/software
</code></pre>

<p>In this example, the root-level directory <code>/pub</code> will contain a subdirectory for each virtual host IP address supported. Repositories can still be accessed by hostname though, assuming they correspond to these IP addresses.</p>

<p>selectively enable/disable services per repository<br />
To enable <em>git archive &ndash;remote</em> and disable <em>git fetch</em> against a repository, have the following in the configuration file in the repository (that is the file <em>config</em> next to <em>HEAD</em>, <em>refs</em> and <em>objects</em>).</p>

<pre><code>        [daemon]
                uploadpack = false
                uploadarch = true
</code></pre>

<h2 id="environment">ENVIRONMENT</h2>

<p><em>git daemon</em> will set REMOTE_ADDR to the IP address of the client that connected to it, if the IP address is available. REMOTE_ADDR will be available in the environment of hooks called when services are performed.</p>

<h2 id="git">GIT</h2>

<p>Part of the <a href="../git">git(1)</a> suite</p>

			</div>
			<div class="col-sm-2">
				
			</div>
		</div>
	</div>
</div>



<a class="bloc-button btn btn-d scrollToTop" onclick="scrollToTarget('1')"><span class="fa fa-chevron-up"></span></a>




<div class="bloc navigation-linksnavigation-links git-background-night bgc-medium-jungle-green d-bloc" id="footer">
	<div class="container bloc-md">
		<div class="row">
			<div class="col-sm-3">
				<h3 class="mg-md">
					Git
				</h3>
				<a href="../../../documentation" class="a-btn a-block bloc-mob-center-text">Documentation</a>
				<a href="../../../how-to" class="a-btn a-block bloc-mob-center-text">How To</a>
				<a href="../../../downloads" class="a-btn a-block bloc-mob-center-text">Downloads</a>
				<a href="../../../resources" class="a-btn a-block bloc-mob-center-text">Resources</a>
			</div>
			<div class="col-sm-3">
				<h3 class="mg-md">
					Resources <br>
				</h3>
				<a href="../../../resources/links" class="a-btn a-block bloc-mob-center-text">Links</a>
				<a href="../../../resources/logo" class="a-btn a-block bloc-mob-center-text">Logos</a>
				<a href="../../../resources/videos" class="a-btn a-block bloc-mob-center-text">Videos</a>
			</div>
			<div class="col-sm-3">
				<h3 class="mg-md">
					DVCS<br>
				</h3>
				<a href="https://github.com/dvcs" class="a-btn a-block bloc-mob-center-text">GitHub</a>
			</div>
			<div class="col-sm-3">
				<h3 class="mg-md">
					About<br>
				</h3>
				<a href="../../../about/#support" class="a-btn a-block bloc-mob-center-text">Support DVCS</a>
			</div>
		</div>
	</div>
</div>



<div class="bloc git-background-night bgc-medium-jungle-green" id="copyright">
	<div class="container bloc-sm">
		<div class="row">
			<div class="col-sm-12 text-center">
				<a href="../../../" target="_blank"><img src="../../../img/git-logo-white.svg" class="img-responsive center-block mg-sm" height="38" width="38" /></a>
				<p class="text-center">
					<a href="https://www.github.com/dvcs">2017 DVCS</a>
				</p>
			</div>
		</div>
	</div>
</div>


</div>



</body>
</html>
