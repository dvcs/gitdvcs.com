<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="keywords" content="">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=0">
    <link rel="shortcut icon" type="image/png" href="favicon.ico">
    
    <link rel="stylesheet" type="text/css" href="https://www.gitdvcs.com/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="https://www.gitdvcs.com/style.css">
    
        <link rel="stylesheet" type="text/css" href="https://www.gitdvcs.com/carbonv.css">
    
    <link rel="stylesheet" href="https://www.gitdvcs.com/css/animate.min.css">
    <link rel="stylesheet" href="https://www.gitdvcs.com/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://www.gitdvcs.com/css/ionicons.min.css">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400&subset=latin,latin-ext' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Varela+Round&subset=latin,latin-ext' rel='stylesheet' type='text/css'>
    
    <script src="https://www.gitdvcs.com/js/jquery-2.1.0.min.js"></script>
    <script src="https://www.gitdvcs.com/js/bootstrap.min.js"></script>
    <script src="https://www.gitdvcs.com/js/blocs.min.js"></script>
    <title> git-merge-base </title>
</head>
<body>


<div class="page-container">


<div class="bloc sticky-nav bg-what-is-git bgc-white l-bloc" id="navigation-bar">
	<div class="container bloc-sm">
	<a href="https://github.com/dvcs/gitdvcs.com" class="github-corner" aria-label="View source on Github"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#42A5E8; color:#FFFFFF; position: absolute; top: 0; border: 0; left: 0; transform: scale(-1, 1);" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

		<nav class="navbar row">
			<div class="navbar-header">
				<a class="navbar-brand" href="https://www.gitdvcs.com/"><img src="https://www.gitdvcs.com/img/git.svg" alt="logo" /></a>
				<button id="nav-toggle" type="button" class="ui-navbar-toggle navbar-toggle" data-toggle="collapse" data-target=".navbar-1">
					<span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span>
				</button>
			</div>
			<div class="collapse navbar-collapse navbar-1">
					<ul class="site-navigation nav navbar-nav navigation-links">
						<li>
							<a href="https://www.gitdvcs.com/documentation/">Documentation</a>
						</li>
						<li>
							<a href="https://www.gitdvcs.com/how-to/">How To</a>
						</li>
						<li>
							<a href="https://www.gitdvcs.com/downloads/">Downloads</a>
						</li>
						<li>
							<a href="https://www.gitdvcs.com/resources/">Resources</a>
						</li>
					</ul>
			</div>
		</nav>
	</div>
</div>





<div class="bloc l-bloc bgc-white " id="bloc-1">
	<div class="container bloc-lg">
		<div class="row">
			<div class="col-sm-10">
				<h1 id="title">git-merge-base</h1>
				<section>
	<div class="bread-container shadow">
		
		
		<ol class="breadcrumb">
			<li><a href="https://www.gitdvcs.com/">home</a></li>
			
			
			
			<li><a href='https://www.gitdvcs.com/documentation'>documentation</a></li>
			
			
			
			
			
			<li><a href='https://www.gitdvcs.com/documentation/2.13.2'>2.13.2</a></li>
			
			
			
			
			
			<li><a href='https://www.gitdvcs.com/documentation/2.13.2/git-merge-base'>git-merge-base</a></li>
			
			
			
			
			
			
		</ol>
	</div>
</section>

				

<!-- Do not manually edit - This file is generated with bootstrap.sh -->

<h2 id="synopsis">SYNOPSIS</h2>

<pre><code class="language-content">git merge-base [-a|--all] &lt;commit&gt; &lt;commit&gt;…
git merge-base [-a|--all] --octopus &lt;commit&gt;…
git merge-base --is-ancestor &lt;commit&gt; &lt;commit&gt;
git merge-base --independent &lt;commit&gt;…
git merge-base --fork-point &lt;ref&gt; [&lt;commit&gt;]
</code></pre>

<h2 id="description">DESCRIPTION</h2>

<p><em>git merge-base</em> finds best common ancestor(s) between two commits to
use in a three-way merge. One common ancestor is <em>better</em> than another
common ancestor if the latter is an ancestor of the former. A common
ancestor that does not have any better common ancestor is a <em>best common
ancestor</em>, i.e. a <em>merge base</em>. Note that there can be more than one
merge base for a pair of commits.</p>

<h2 id="operation-modes">OPERATION MODES</h2>

<p>As the most common special case, specifying only two commits on the
command line means computing the merge base between the given two
commits.</p>

<p>More generally, among the two commits to compute the merge base from,
one is specified by the first commit argument on the command line; the
other commit is a (possibly hypothetical) commit that is a merge across
all the remaining commits on the command line.</p>

<p>As a consequence, the <em>merge base</em> is not necessarily contained in each
of the commit arguments if more than two commits are specified. This is
different from <a href="../git-show-branch">git-show-branch(1)</a> when used with
the <code>--merge-base</code> option.</p>

<ul>
<li><p>&ndash;octopus<br />
Compute the best common ancestors of all supplied commits, in
preparation for an n-way merge. This mimics the behavior of <em>git
show-branch &ndash;merge-base</em>.</p></li>

<li><p>&ndash;independent<br />
Instead of printing merge bases, print a minimal subset of the
supplied commits with the same ancestors. In other words, among the
commits given, list those which cannot be reached from any other.
This mimics the behavior of <em>git show-branch &ndash;independent</em>.</p></li>

<li><p>&ndash;is-ancestor<br />
Check if the first &lt;commit&gt; is an ancestor of the second
&lt;commit&gt;, and exit with status 0 if true, or with status 1 if not.
Errors are signaled by a non-zero status that is not 1.</p></li>

<li><p>&ndash;fork-point<br />
Find the point at which a branch (or any history that leads to
&lt;commit&gt;) forked from another branch (or any reference) &lt;ref&gt;.
This does not just look for the common ancestor of the two commits,
but also takes into account the reflog of &lt;ref&gt; to see if the
history leading to &lt;commit&gt; forked from an earlier incarnation of
the branch &lt;ref&gt; (see discussion on this mode below).</p></li>
</ul>

<h2 id="options">OPTIONS</h2>

<ul>
<li>-a<br />
--all<br />
Output all merge bases for the commits, instead of just one.</li>
</ul>

<h2 id="discussion">DISCUSSION</h2>

<p>Given two commits <em>A</em> and <em>B</em>, <code>git merge-base A B</code> will output a commit
which is reachable from both <em>A</em> and <em>B</em> through the parent
relationship.</p>

<p>For example, with this topology:</p>

<pre><code>         o---o---o---B
        /
---o---1---o---o---o---A
</code></pre>

<p>the merge base between <em>A</em> and <em>B</em> is <em>1</em>.</p>

<p>Given three commits <em>A</em>, <em>B</em> and <em>C</em>, <code>git merge-base A B C</code> will
compute the merge base between <em>A</em> and a hypothetical commit <em>M</em>, which
is a merge between <em>B</em> and <em>C</em>. For example, with this topology:</p>

<pre><code>       o---o---o---o---C
      /
     /   o---o---o---B
    /   /
---2---1---o---o---o---A
</code></pre>

<p>the result of <code>git merge-base A B C</code> is <em>1</em>. This is because the
equivalent topology with a merge commit <em>M</em> between <em>B</em> and <em>C</em> is:</p>

<pre><code>       o---o---o---o---o
      /                 \
     /   o---o---o---o---M
    /   /
---2---1---o---o---o---A
</code></pre>

<p>and the result of <code>git merge-base A M</code> is <em>1</em>. Commit <em>2</em> is also a
common ancestor between <em>A</em> and <em>M</em>, but <em>1</em> is a better common
ancestor, because <em>2</em> is an ancestor of <em>1</em>. Hence, <em>2</em> is not a merge
base.</p>

<p>The result of <code>git merge-base --octopus A B C</code> is <em>2</em>, because <em>2</em> is
the best common ancestor of all commits.</p>

<p>When the history involves criss-cross merges, there can be more than one
<em>best</em> common ancestor for two commits. For example, with this topology:</p>

<pre><code>---1---o---A
    \ /
     X
    / \
---2---o---o---B
</code></pre>

<p>both <em>1</em> and <em>2</em> are merge-bases of A and B. Neither one is better than
the other (both are <em>best</em> merge bases). When the <code>--all</code> option is not
given, it is unspecified which best one is output.</p>

<p>A common idiom to check &ldquo;fast-forward-ness&rdquo; between two commits A and B
is (or at least used to be) to compute the merge base between A and B,
and check if it is the same as A, in which case, A is an ancestor of B.
You will see this idiom used often in older scripts.</p>

<pre><code>A=$(git rev-parse --verify A)
if test &quot;$A&quot; = &quot;$(git merge-base A B)&quot;
then
        ... A is an ancestor of B ...
fi
</code></pre>

<p>In modern git, you can say this in a more direct way:</p>

<pre><code>if git merge-base --is-ancestor A B
then
        ... A is an ancestor of B ...
fi
</code></pre>

<p>instead.</p>

<h2 id="discussion-on-fork-point-mode">Discussion on fork-point mode</h2>

<p>After working on the <code>topic</code> branch created with <code>git checkout -b topic
origin/master</code>, the history of remote-tracking branch <code>origin/master</code>
may have been rewound and rebuilt, leading to a history of this shape:</p>

<pre><code>                 o---B1
                /
---o---o---B2--o---o---o---B (origin/master)
        \
         B3
          \
           Derived (topic)
</code></pre>

<p>where <code>origin/master</code> used to point at commits B3, B2, B1 and now it
points at B, and your <code>topic</code> branch was started on top of it back when
<code>origin/master</code> was at B3. This mode uses the reflog of <code>origin/master</code>
to find B3 as the fork point, so that the <code>topic</code> can be rebased on top
of the updated <code>origin/master</code> by:</p>

<pre><code>$ fork_point=$(git merge-base --fork-point origin/master topic)
$ git rebase --onto origin/master $fork_point topic
</code></pre>

<h2 id="see-also">See also</h2>

<p><a href="../git-rev-list">git-rev-list(1)</a>,
<a href="../git-show-branch">git-show-branch(1)</a>,
<a href="../git-merge">git-merge(1)</a></p>

<h2 id="git">GIT</h2>

<p>Part of the <a href="../git">git(1)</a> suite</p>

			</div>
			<div class="col-sm-2">
				
<center>
<script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?zoneid=1673&serve=C6AILKT&placement=gitdvcscom" id="_carbonads_js"></script>
</center>


			</div>
		</div>
	</div>
</div>



<a class="bloc-button btn btn-d scrollToTop" onclick="scrollToTarget('1')"><span class="fa fa-chevron-up"></span></a>




<div class="bloc navigation-linksnavigation-links git-background-night bgc-medium-jungle-green d-bloc" id="footer">
	<div class="container bloc-md">
		<div class="row">
			<div class="col-sm-3">
				<h4 class="mg-md">
					Git
				</h4><a href="https://www.gitdvcs.com/documentation/" class="a-btn a-block bloc-mob-center-text">Documentation</a><a href="https://www.gitdvcs.com/how-to/" class="a-btn a-block bloc-mob-center-text">How To</a><a href="https://www.gitdvcs.com/downloads/" class="a-btn a-block bloc-mob-center-text">Downloads</a><a href="https://www.gitdvcs.com/resources/" class="a-btn a-block bloc-mob-center-text">Resources</a>
			</div>
			<div class="col-sm-3">
				<h4 class="mg-md">
					Resources <br>
				</h4><a href="https://www.gitdvcs.com/resources/links/" class="a-btn a-block bloc-mob-center-text">Links</a><a href="https://www.gitdvcs.com/resources/logo/" class="a-btn a-block bloc-mob-center-text">Logo</a><a href="https://www.gitdvcs.com/resources/videos/" class="a-btn a-block bloc-mob-center-text">Videos</a>
			</div>
			<div class="col-sm-3">
				<h4 class="mg-md">
					DVCS<br>
				</h4><a href="https://github.com/dvcs" class="a-btn a-block bloc-mob-center-text">GitHub</a>
			</div>
			<div class="col-sm-3">
				<h4 class="mg-md">
					About<br>
				</h4><a href="https://www.gitdvcs.com/about/" class="a-btn a-block bloc-mob-center-text">About</a>
			</div>
		</div>
	</div>
</div>



<div class="bloc git-background-night bgc-medium-jungle-green" id="copyright">
	<div class="container bloc-sm">
		<div class="row">
			<div class="col-sm-12 text-center">
				<a href="https://www.gitdvcs.com"><img src="https://www.gitdvcs.com/img/git-logo-white.svg" class="img-responsive center-block mg-md" height="38" width="38" /></a>
				<p class="text-center mg-lg">
					<a href="https://github.com/dvcs">2017 DVCS</a><br>
				</p>
			</div>
		</div>
	</div>
</div>


</div>



</body>
</html>
