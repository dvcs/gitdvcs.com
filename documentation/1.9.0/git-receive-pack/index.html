<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="keywords" content="">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=0">
    <link rel="shortcut icon" type="image/png" href="favicon.ico">
    
    <link rel="stylesheet" type="text/css" href="https://www.gitdvcs.com/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="https://www.gitdvcs.com/style.css">
    
        <link rel="stylesheet" type="text/css" href="https://www.gitdvcs.com/carbonv.css">
    
    <link rel="stylesheet" href="https://www.gitdvcs.com/css/animate.min.css">
    <link rel="stylesheet" href="https://www.gitdvcs.com/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://www.gitdvcs.com/css/ionicons.min.css">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400&subset=latin,latin-ext' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Varela+Round&subset=latin,latin-ext' rel='stylesheet' type='text/css'>
    
    <script src="https://www.gitdvcs.com/js/jquery-2.1.0.min.js"></script>
    <script src="https://www.gitdvcs.com/js/bootstrap.min.js"></script>
    <script src="https://www.gitdvcs.com/js/blocs.min.js"></script>
    <title> git-receive-pack </title>
</head>
<body>


<div class="page-container">


<div class="bloc sticky-nav bg-what-is-git bgc-white l-bloc" id="navigation-bar">
	<div class="container bloc-sm">
	<a href="https://github.com/dvcs/gitdvcs.com" class="github-corner" aria-label="View source on Github"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#42A5E8; color:#FFFFFF; position: absolute; top: 0; border: 0; left: 0; transform: scale(-1, 1);" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

		<nav class="navbar row">
			<div class="navbar-header">
				<a class="navbar-brand" href="https://www.gitdvcs.com/"><img src="https://www.gitdvcs.com/img/git.svg" alt="logo" /></a>
				<button id="nav-toggle" type="button" class="ui-navbar-toggle navbar-toggle" data-toggle="collapse" data-target=".navbar-1">
					<span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span>
				</button>
			</div>
			<div class="collapse navbar-collapse navbar-1">
					<ul class="site-navigation nav navbar-nav navigation-links">
						<li>
							<a href="https://www.gitdvcs.com/documentation/">Documentation</a>
						</li>
						<li>
							<a href="https://www.gitdvcs.com/how-to/">How To</a>
						</li>
						<li>
							<a href="https://www.gitdvcs.com/downloads/">Downloads</a>
						</li>
						<li>
							<a href="https://www.gitdvcs.com/resources/">Resources</a>
						</li>
					</ul>
			</div>
		</nav>
	</div>
</div>





<div class="bloc l-bloc bgc-white " id="bloc-1">
	<div class="container bloc-lg">
		<div class="row">
			<div class="col-sm-10">
				<h1 id="title">git-receive-pack</h1>
				<section>
	<div class="bread-container shadow">
		
		
		<ol class="breadcrumb">
			<li><a href="https://www.gitdvcs.com/">home</a></li>
			
			
			
			<li><a href='https://www.gitdvcs.com/documentation'>documentation</a></li>
			
			
			
			
			
			<li><a href='https://www.gitdvcs.com/documentation/1.9.0'>1.9.0</a></li>
			
			
			
			
			
			<li><a href='https://www.gitdvcs.com/documentation/1.9.0/git-receive-pack'>git-receive-pack</a></li>
			
			
			
			
			
			
		</ol>
	</div>
</section>

				

<!-- Do not manually edit - This file is generated with bootstrap.sh -->

<h2 id="synopsis">SYNOPSIS</h2>

<pre><code class="language-content">git-receive-pack &lt;directory&gt;
</code></pre>

<h2 id="description">DESCRIPTION</h2>

<p>Invoked by <em>git send-pack</em> and updates the repository with the information fed from the remote end.</p>

<p>This command is usually not invoked directly by the end user. The UI for the protocol is on the <em>git send-pack</em> side, and the program pair is meant to be used to push updates to remote repository. For pull operations, see <a href="../git-fetch-pack">git-fetch-pack(1)</a>.</p>

<p>The command allows for creation and fast-forwarding of sha1 refs (heads/tags) on the remote end (strictly speaking, it is the local end <em>git-receive-pack</em> runs, but to the user who is sitting at the send-pack end, it is updating the remote. Confused?)</p>

<p>There are other real-world examples of using update and post-update hooks found in the Documentation/howto directory.</p>

<p><em>git-receive-pack</em> honours the receive.denyNonFastForwards config option, which tells it if updates to a ref should be denied if they are not fast-forwards.</p>

<h2 id="options">OPTIONS</h2>

<p>&lt;directory&gt;<br />
The repository to sync into.</p>

<h2 id="pre-receive-hook">pre-receive Hook</h2>

<p>Before any ref is updated, if $GIT_DIR/hooks/pre-receive file exists and is executable, it will be invoked once with no parameters. The standard input of the hook will be one line per ref to be updated:</p>

<pre><code>sha1-old SP sha1-new SP refname LF
</code></pre>

<p>The refname value is relative to $GIT_DIR; e.g. for the master head this is &ldquo;refs/heads/master&rdquo;. The two sha1 values before each refname are the object names for the refname before and after the update. Refs to be created will have sha1-old equal to 0{40}, while refs to be deleted will have sha1-new equal to 0{40}, otherwise sha1-old and sha1-new should be valid objects in the repository.</p>

<p>This hook is called before any refname is updated and before any fast-forward checks are performed.</p>

<p>If the pre-receive hook exits with a non-zero exit status no updates will be performed, and the update, post-receive and post-update hooks will not be invoked either. This can be useful to quickly bail out if the update is not to be supported.</p>

<h2 id="update-hook">update Hook</h2>

<p>Before each ref is updated, if $GIT_DIR/hooks/update file exists and is executable, it is invoked once per ref, with three parameters:</p>

<pre><code>$GIT_DIR/hooks/update refname sha1-old sha1-new
</code></pre>

<p>The refname parameter is relative to $GIT_DIR; e.g. for the master head this is &ldquo;refs/heads/master&rdquo;. The two sha1 arguments are the object names for the refname before and after the update. Note that the hook is called before the refname is updated, so either sha1-old is 0{40} (meaning there is no such ref yet), or it should match what is recorded in refname.</p>

<p>The hook should exit with non-zero status if it wants to disallow updating the named ref. Otherwise it should exit with zero.</p>

<p>Successful execution (a zero exit status) of this hook does not ensure the ref will actually be updated, it is only a prerequisite. As such it is not a good idea to send notices (e.g. email) from this hook. Consider using the post-receive hook instead.</p>

<h2 id="post-receive-hook">post-receive Hook</h2>

<p>After all refs were updated (or attempted to be updated), if any ref update was successful, and if $GIT_DIR/hooks/post-receive file exists and is executable, it will be invoked once with no parameters. The standard input of the hook will be one line for each successfully updated ref:</p>

<pre><code>sha1-old SP sha1-new SP refname LF
</code></pre>

<p>The refname value is relative to $GIT_DIR; e.g. for the master head this is &ldquo;refs/heads/master&rdquo;. The two sha1 values before each refname are the object names for the refname before and after the update. Refs that were created will have sha1-old equal to 0{40}, while refs that were deleted will have sha1-new equal to 0{40}, otherwise sha1-old and sha1-new should be valid objects in the repository.</p>

<p>Using this hook, it is easy to generate mails describing the updates to the repository. This example script sends one mail message per ref listing the commits pushed to the repository:</p>

<pre><code>#!/bin/sh
# mail out commit update information.
while read oval nval ref
do
        if expr &quot;$oval&quot; : '0*$' &gt;/dev/null
        then
                echo &quot;Created a new ref, with the following commits:&quot;
                git rev-list --pretty &quot;$nval&quot;
        else
                echo &quot;New commits:&quot;
                git rev-list --pretty &quot;$nval&quot; &quot;^$oval&quot;
        fi |
        mail -s &quot;Changes to ref $ref&quot; commit-list@mydomain
done
exit 0
</code></pre>

<p>The exit code from this hook invocation is ignored, however a non-zero exit code will generate an error message.</p>

<p>Note that it is possible for refname to not have sha1-new when this hook runs. This can easily occur if another user modifies the ref after it was updated by <em>git-receive-pack</em>, but before the hook was able to evaluate it. It is recommended that hooks rely on sha1-new rather than the current value of refname.</p>

<h2 id="post-update-hook">post-update Hook</h2>

<p>After all other processing, if at least one ref was updated, and if $GIT_DIR/hooks/post-update file exists and is executable, then post-update will be called with the list of refs that have been updated. This can be used to implement any repository wide cleanup tasks.</p>

<p>The exit code from this hook invocation is ignored; the only thing left for <em>git-receive-pack</em> to do at that point is to exit itself anyway.</p>

<p>This hook can be used, for example, to run <code>git               update-server-info</code> if the repository is packed and is served via a dumb transport.</p>

<pre><code>#!/bin/sh
exec git update-server-info
</code></pre>

<h2 id="see-also">SEE ALSO</h2>

<p><a href="../git-send-pack">git-send-pack(1)</a>, <a href="../gitnamespaces">gitnamespaces(7)</a></p>

<h2 id="git">GIT</h2>

<p>Part of the <a href="../git">git(1)</a> suite</p>

			</div>
			<div class="col-sm-2">
				
<center>
<script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?zoneid=1673&serve=C6AILKT&placement=gitdvcscom" id="_carbonads_js"></script>
</center>


			</div>
		</div>
	</div>
</div>



<a class="bloc-button btn btn-d scrollToTop" onclick="scrollToTarget('1')"><span class="fa fa-chevron-up"></span></a>




<div class="bloc navigation-linksnavigation-links git-background-night bgc-medium-jungle-green d-bloc" id="footer">
	<div class="container bloc-md">
		<div class="row">
			<div class="col-sm-3">
				<h4 class="mg-md">
					Git
				</h4><a href="https://www.gitdvcs.com/documentation/" class="a-btn a-block bloc-mob-center-text">Documentation</a><a href="https://www.gitdvcs.com/how-to/" class="a-btn a-block bloc-mob-center-text">How To</a><a href="https://www.gitdvcs.com/downloads/" class="a-btn a-block bloc-mob-center-text">Downloads</a><a href="https://www.gitdvcs.com/resources/" class="a-btn a-block bloc-mob-center-text">Resources</a>
			</div>
			<div class="col-sm-3">
				<h4 class="mg-md">
					Resources <br>
				</h4><a href="https://www.gitdvcs.com/resources/links/" class="a-btn a-block bloc-mob-center-text">Links</a><a href="https://www.gitdvcs.com/resources/logo/" class="a-btn a-block bloc-mob-center-text">Logo</a><a href="https://www.gitdvcs.com/resources/videos/" class="a-btn a-block bloc-mob-center-text">Videos</a>
			</div>
			<div class="col-sm-3">
				<h4 class="mg-md">
					DVCS<br>
				</h4><a href="https://github.com/dvcs" class="a-btn a-block bloc-mob-center-text">GitHub</a>
			</div>
			<div class="col-sm-3">
				<h4 class="mg-md">
					About<br>
				</h4><a href="https://www.gitdvcs.com/about/#support" class="a-btn a-block bloc-mob-center-text">Support DVCS</a>
			</div>
		</div>
	</div>
</div>



<div class="bloc git-background-night bgc-medium-jungle-green" id="copyright">
	<div class="container bloc-sm">
		<div class="row">
			<div class="col-sm-12 text-center">
				<a href="https://www.gitdvcs.com"><img src="https://www.gitdvcs.com/img/git-logo-white.svg" class="img-responsive center-block mg-md" height="38" width="38" /></a>
				<p class="text-center mg-lg">
					<a href="https://github.com/dvcs">2017 DVCS</a><br>
				</p>
			</div>
		</div>
	</div>
</div>


</div>



</body>
</html>
